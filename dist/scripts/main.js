"use strict";function initPage(){document.body.addEventListener("touchstart",function(e){e=e.changedTouches[0],onStart(e)}),document.body.addEventListener("touchmove",function(e){onMove(e.changedTouches[0],e)}),document.body.addEventListener("touchend",function(e){onEnd(e.changedTouches[0])}),window.onorientationchange=orientationChange,pageWidth=$(window).width(),pageHeight=$(".container").height(),pages=$(".container section"),$(".container section").css({width:pageWidth+"px",height:pageHeight+"px"}),secHeight=pageHeight*$(".container section").length,lineHeight=832*secHeight/pageHeight,$(".sec, .line").addClass("drag"),animatePage(curPage),$(".page-loading").removeClass("page-loading")}function orientationChange(){setTimeout(function(){initPage()},500)}function onStart(e){return 1==movePrevent?(event.preventDefault(),!1):(touchDown=!0,startX=e.pageX,startY=e.pageY,$(".sec, .line").addClass("drag"),margin=$(".sec").css("-webkit-transform"),margin=margin.replace("matrix(",""),margin=margin.replace(")",""),margin=margin.split(","),void(margin=parseInt(margin[5])))}function onMove(e,t){if(1==movePrevent||1!=touchDown)return event.preventDefault(),!1;if(event.preventDefault(),0==scrollPrevent&&e.pageY!=startY){var n=margin+e.pageY-startY;$(".sec").css("-webkit-transform","matrix(1, 0, 0, 1, 0, "+n+")");var a=lineHeight/secHeight*n;$(".line").css("-webkit-transform","matrix(1, 0, 0, 1, 0, "+a+")")}}function onEnd(e){if(1==movePrevent)return event.preventDefault(),!1;if(touchDown=!1,0==scrollPrevent){var t=(e.pageX,e.pageY);Math.abs(t-startY)<=60?animatePage(curPage):t>startY?prevPage():nextPage()}$(".sec, .line").removeClass("drag")}function prevPage(){var e=curPage-1;animatePage(e)}function nextPage(){var e=curPage+1;animatePage(e)}function animatePage(e){0>e&&(e=0),e>$(".container section").length-1&&(e=$(".container section").length-1),curPage=e;var t=e*-pageHeight;$(".sec").css({"-webkit-transform":"matrix(1, 0, 0, 1, 0, "+t+")"});var n=-parseInt(curPage*pageHeight*(lineHeight/secHeight));$(".line").css({"-webkit-transform":"matrix(1, 0, 0, 1, 0, "+n+")"}),movePrevent=!0,setTimeout("movePrevent=false;",500),$(pages[curPage]).hasClass("sec0"+(curPage+1)+"-show")||($(pages[curPage]).addClass("sec0"+(curPage+1)+"-show"),$(pages[curPage]).addClass("sec-show")),$(pages[curPage-1]).removeClass("sec0"+curPage+"-show"),$(pages[curPage-1]).removeClass("sec-show"),$(pages[curPage+1]).removeClass("sec0"+(curPage+2)+"-show"),$(pages[curPage+1]).removeClass("sec-show")}function initShare(){isWechat&&($.ajax({url:"/serve/jssign",type:"GET",dataType:"json",data:{url:location.href},success:function(e){0===e.errorCode&&wx.config(e.result)}}),wx.ready(function(){wx.onMenuShareTimeline({title:WX_DEFAULT_SHARE.timelineDesc,link:WX_DEFAULT_SHARE.link,imgUrl:WX_DEFAULT_SHARE.imgUrl,success:function(){_paq.push(["trackEvent","timemachine","share","timeline"]),$(".share-overlay").hide()}}),wx.onMenuShareAppMessage({title:WX_DEFAULT_SHARE.title,desc:WX_DEFAULT_SHARE.desc,link:WX_DEFAULT_SHARE.link,imgUrl:WX_DEFAULT_SHARE.imgUrl,success:function(){_paq.push(["trackEvent","timemachine","share","message"]),$(".share-overlay").hide()}})}))}var startX=0,startY=0,margin=0,pages=null,curPage=0,pageWidth=0,pageHeight=0,lineHeight=0,secHeight=0,targetElement=null,scrollPrevent=!1,movePrevent=!1,touchDown=!1,num=null,curNum=0,WX_DEFAULT_SHARE={title:"title",desc:"desc",timelineDesc:"title",imgUrl:"",link:""};$(function(){$(".btn-1").on("click",function(){location.href="https://www.baidu.com"}),$(".btn-2").on("click",function(){location.href="https://www.baidu.com"}),$(".btn-3").on("click",function(){location.href="https://www.baidu.com"}),initPage()});